{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v3.8.6">
    <title>Instagram</title>


    <!-- Bootstrap core CSS -->
    
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
  
  </head>
  <body>

  	<nav class="navbar navbar-expand-lg navbar-light bg-light">
	  <a class="navbar-brand" href="#">Instagram</a>
	  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
	    <span class="navbar-toggler-icon"></span>
	  </button>

	  <div class="collapse navbar-collapse" id="navbarSupportedContent">
	    <ul class="navbar-nav mr-auto">
	      <li class="nav-item">
	        <a class="nav-link" href="{% url 'home' %}">Home</a>
	      </li>
	      <li class="nav-item active">
	        <a class="nav-link" href="{% url 'profile' %}">Profile<span class="sr-only">(current)</span></a>
	      </li>
	    </ul>
	    <form class="form-inline" style="margin-left:10%; ">
	      <input class="form-control mr-sm-2" type="search" placeholder="Search by username" aria-label="Search">
	      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
	    </form>
	    
		    <ul class="nav navbar-nav navbar-right">
		      <li><span class="glyphicon glyphicon-user" style="margin-right: 370px;"></span> {{ request.user }}</li>
		      <li><a href="{% url 'logoutUser' %}"><span class="glyphicon glyphicon-log-out" style="margin-right: 15px;"></span>Logout</a></li>
		    </ul>
	  </div>
	</nav>
<br>
<br>

<div class="row">
	<div class="col-lg-8" style="margin-left: 350px;">
		<div class="jumbotron">
	        <img src="{{ user.profile.image.url }}" class="rounded-circle account-img" >
	        <h2 class="account-heading">{{ user.username }}</h2>
	        <p class="text-secondary">{{ user.email }}</p>
    	</div>
    </div>
</div>


	<div style="width:600px; margin:0 auto;">
		<div class="card mb-4 shadow-sm">
			<div class="jumbotron">
			<form method="POST" action="{% url 'profile' %}" enctype="multipart/form-data" class="form-group">
			{% csrf_token %}
				{{ form }}
			<br>
			<input type="submit" name="post" value="post" class="btn btn-primary">
			</form>
		</div>
		</div>
	</div>
  
<br>
{% if user %}
	{% for post in user_posts %}
		<div style="width:600px; margin:0 auto;">
		        <div class="card mb-4 shadow-sm">
		        		<div class="row">
			        		<p style="margin-left: 20px;">User <strong>@{{ post.user.username }}</strong></p>
			        		<p style="text-align: center; margin-left: 460px;"><strong>...</strong></p>

						</div>
			        	<!-- <hr> -->
		    			<div style="width:600px;
					              height:500px;
					              background-image:url('{{ post.image.url }}');
					              background-repeat: no-repeat;
					              background-size:cover;
					              background-position:center;
					              margin: 0 auto;">
	            		</div>
	            		<br>
	            		<div>
	            			<p>Caption:: <strong>{{ post.caption }}</strong></p>
	            			<hr>
	            			{% for comment in post.comments.all %}
	            				<div class="comment">
	            					<p style="padding-left: 5px;"><a href="#" style="padding-left: 5px;">@{{ comment.author }}</a>  {{ comment.text }}</p>
	            				</div>
	            			{% endfor %}
	            			<hr>
	            			<form method="POST" action="{% url 'add_comment' post.id %}" class="form-inline">
	            				{% csrf_token %}
	            				{{ c_form }}
	            				<input type="submit" value="Add" class="btn btn-primary">
	            			</form>
	            			<br>
	            		</div>
	            </div>		
		</div>
		<br>
		<br>
	{% endfor %}
{% endif %}
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="{% static 'js/bootstrap.min.js' %}" crossorigin="anonymous"></script>
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
</body>
</html>